<head>
<title>sidscoffee</title>
</head>

<body>
<img src="CoffeeLogo.png" alt="Sid's Coffee" width=400>
<br>
<br>
<h2> SKU #1: Coffee Dark Roast 1 kg</h2>
<img src="Coffee Dark Roast 1kg.jpg" alt="Coffee Dark Roast 1kg" width=200>
<br> 
 
<!-- Load Stripe.js on your website. -->
<script src="https://js.stripe.com/v3"></script>

<!-- Create a button that your customers click to complete their purchase. Customize the styling to suit your branding. -->
<button
  style="background-color:#FFC90F;color:#000;padding:8px 12px;border:0;border-radius:8px;font-size:1em"
  id="checkout-button-sku_FPgE41uRWsw41I"
  role="link"
>
  Stripe Checkout
</button>

<div id="error-message"></div>

<script>
  var stripe = Stripe('pk_test_95YTjw9WsjGmaVa9iaSPeaO400uPSP6B0Y');

  var checkoutButton = document.getElementById('checkout-button-sku_FPgE41uRWsw41I');
  checkoutButton.addEventListener('click', function () {
    // When the customer clicks on the button, redirect
    // them to Checkout.
    stripe.redirectToCheckout({
      items: [{sku: 'sku_FPgE41uRWsw41I', quantity: 1}],

      // Do not rely on the redirect to the successUrl for fulfilling
      // purchases, customers may not always reach the success_url after
      // a successful payment.
      // Instead use one of the strategies described in
      // https://stripe.com/docs/payments/checkout/fulfillment
      successUrl: 'https://sidshanbhag.github.io/ecommerce/success?session_id={CHECKOUT_SESSION_ID}',
      cancelUrl: 'https://sidshanbhag.github.io/ecommerce/failure.html',
      customerEmail: 'prefilled@example.com',
      billingAddressCollection: 'required',
    })
    .then(function (result) {
      if (result.error) {
        // If `redirectToCheckout` fails due to a browser or network
        // error, display the localized error message to your customer.
        var displayError = document.getElementById('error-message');
        displayError.textContent = result.error.message;
      }
    });
  });
</script>


<br>
 
 // Re-using cart from previous snippet
<script>
  id="bolt-track"
  type="text/javascript"
  src="{CDN_URL}/track.js"
  data-publishable-key="{PUBLISHABLE_KEY}">
</script>
 
 <script>
  id="bolt-connect"
  type="text/javascript"
  src="{CDN_URL}/connect.js"
  data-publishable-key="{PUBLISHABLE_KEY}">
</script>

// <script>

 //<div class="bolt-checkout-button bolt-multi-step-checkout"></div>
 
 //<script>

 var cart = {
  [
    {
      reference: "123",
      quantity: 1,
    },
  ],
};

var buttonClass = "bolt-product-checkout-button"
var hints = {};
var callbacks = {
  check: function() {
    var quantity = cart.items[0].quantity;
    if (quantity == "") {
      $("#quantityError").text("Please input a valid quantity")
      return false; 
    }
    // Removing text if the error goes away
    $("#quantityError").text("")
    return true;
  },
  
  onCheckoutStart: function() {
    // This function is called after the checkout form is presented to the user.
  },
  
  onShippingDetailsComplete: function() {
    // This function is called when the user proceeds to the shipping options page.
    // This is applicable only to multi-step checkout.
  },
  
  onShippingOptionsComplete: function() {
    // This function is called when the user proceeds to the payment details page.
    // This is applicable only to multi-step checkout.
  },
  
  onPaymentSubmit: function() {
    // This function is called after the user clicks the pay button.
  },
  
  success: function(transaction, callback) {
    // This function is called when the Bolt checkout transaction is successful.
    
    // ... Add your code here ...
        
    // **IMPORTANT** callback must be executed at the end of this function if `success`
    // is defined.
    callback();
  },
  
  close: function() {
    // This function is called when the Bolt checkout modal is closed.
  }
};
BoltCheckout.configureProductCheckout(cart, hints, callbacks, { checkoutButtonClassName: buttonClass });
</script>
<br>
</body>
